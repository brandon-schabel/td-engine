<!DOCTYPE html>
<html>
<head>
    <title>Terrain Debug</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: monospace;
        }
        button {
            padding: 10px 20px;
            margin: 10px;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #45a049;
        }
        #info {
            margin-top: 20px;
            padding: 10px;
            background: #333;
            border: 1px solid #555;
        }
    </style>
</head>
<body>
    <h1>Terrain Movement Debug Console</h1>
    
    <button onclick="enableDebug()">Enable Terrain Debug</button>
    <button onclick="disableDebug()">Disable Terrain Debug</button>
    <button onclick="spawnEnemyOnTerrain()">Spawn Enemy on Rough Terrain</button>
    <button onclick="checkPlayerTerrain()">Check Player Terrain</button>
    
    <div id="info">
        <h3>Instructions:</h3>
        <ol>
            <li>Open the game in another tab</li>
            <li>Click "Enable Terrain Debug" here</li>
            <li>Move player or wait for enemies to move</li>
            <li>Check console for terrain speed logs</li>
            <li>Look for messages like: "[TerrainDebug] ENEMY_1 at (100, 100) on ROUGH_TERRAIN: speed 50%"</li>
        </ol>
        <p>Open browser console (F12) to see debug output</p>
    </div>
    
    <script>
        function enableDebug() {
            if (window.opener && window.opener.TerrainDebug) {
                window.opener.TerrainDebug.enable();
                console.log('Terrain debug enabled in game window');
            } else {
                console.error('Game window not found or TerrainDebug not available');
            }
        }
        
        function disableDebug() {
            if (window.opener && window.opener.TerrainDebug) {
                window.opener.TerrainDebug.disable();
                console.log('Terrain debug disabled');
            }
        }
        
        function spawnEnemyOnTerrain() {
            console.log('Check game - enemies should spawn and show terrain effects in console');
        }
        
        function checkPlayerTerrain() {
            if (window.opener && window.opener.game) {
                const game = window.opener.game;
                const player = game.player;
                const grid = game.grid;
                
                if (player && grid) {
                    const gridPos = grid.worldToGrid(player.position);
                    const cellType = grid.getCellType(gridPos.x, gridPos.y);
                    const speedMult = grid.getMovementSpeed(gridPos.x, gridPos.y);
                    
                    console.log('Player terrain check:');
                    console.log('- Position:', player.position);
                    console.log('- Grid cell:', gridPos);
                    console.log('- Terrain type:', cellType);
                    console.log('- Speed multiplier:', speedMult);
                    console.log('- Base speed:', player.baseSpeed);
                    console.log('- Current speed:', player.currentSpeed);
                }
            } else {
                console.error('Game not accessible');
            }
        }
        
        // Auto-enable debug on load
        setTimeout(() => {
            enableDebug();
        }, 1000);
    </script>
</body>
</html>