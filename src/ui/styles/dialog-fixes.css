/* Dialog System CSS Fixes */

/* Prevent scrolling when dialog is open */
body.dialog-open {
  overflow: hidden;
  touch-action: none;
}

/* Ensure dialog containers are properly layered */
.dialog-container {
  position: fixed !important;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10000;
  pointer-events: auto !important;
}

/* Dialog panel fixes */
.dialog-panel {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate3d(-50%, -50%, 0);
  -webkit-transform: translate3d(-50%, -50%, 0);
  will-change: transform, opacity;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

/* Fix for Safari mobile */
@supports (-webkit-touch-callout: none) {
  .dialog-panel {
    -webkit-transform: translate3d(-50%, -50%, 0);
    transform: translate3d(-50%, -50%, 0);
  }
  
  .dialog-container {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}

/* Mobile fullscreen dialog fixes */
@media (max-width: 768px) {
  .dialog-panel {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    transform: none !important;
    -webkit-transform: none !important;
    width: 100vw !important;
    height: 100vh !important;
    max-height: 100vh !important;
    border-radius: 0 !important;
    border: none !important;
  }
  
  .dialog-content {
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Ensure touch targets are large enough */
  .dialog-button,
  button,
  input[type="checkbox"],
  input[type="range"],
  select {
    min-height: 44px;
  }
  
  /* Fix for iOS safe areas */
  .dialog-panel {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Prevent text selection during swipe */
.dialog-header {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Improve button touch feedback */
.dialog-button:active,
button:active {
  transform: scale(0.98);
  opacity: 0.9;
}

/* Fix slider appearance on mobile */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  width: 100%;
}

input[type="range"]:focus {
  outline: none;
}

/* Ensure dialogs are above everything else */
.dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  -webkit-backdrop-filter: none; /* Disable blur on mobile for performance */
  backdrop-filter: none;
}

/* Animation performance improvements */
.dialog-panel,
.dialog-overlay {
  will-change: opacity, transform;
}

/* Prevent double-tap zoom on buttons */
button,
input,
select,
textarea {
  touch-action: manipulation;
}

/* Fix for landscape mobile */
@media (max-width: 768px) and (orientation: landscape) {
  .dialog-content {
    max-height: calc(100vh - 100px);
  }
  
  .dialog-footer {
    padding: 8px 16px;
  }
}